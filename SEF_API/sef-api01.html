<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-SEF_API/sef-api01">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="API Docs" href="/SEF-API/opensearch.xml"><title data-rh="true">Data Access Commands | API Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://SoftwareEnabledFlash.github.io/SEF-API/SEF_API/sef-api01"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Data Access Commands | API Docs"><meta data-rh="true" name="description" content="SEFWriteWithoutPhysicalAddress"><meta data-rh="true" property="og:description" content="SEFWriteWithoutPhysicalAddress"><link data-rh="true" rel="icon" href="/SEF-API/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://SoftwareEnabledFlash.github.io/SEF-API/SEF_API/sef-api01"><link data-rh="true" rel="alternate" href="https://SoftwareEnabledFlash.github.io/SEF-API/SEF_API/sef-api01" hreflang="en"><link data-rh="true" rel="alternate" href="https://SoftwareEnabledFlash.github.io/SEF-API/SEF_API/sef-api01" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://4NVQ99YLZU-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/SEF-API/assets/css/styles.742ae0a8.css">
<link rel="preload" href="/SEF-API/assets/js/runtime~main.02760fe7.js" as="script">
<link rel="preload" href="/SEF-API/assets/js/main.eb5edea8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/SEF-API/"><div class="navbar__logo"><img src="/SEF-API/img/sef-light-logo.png" alt="SEF Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/SEF-API/img/sef-light-dark.png" alt="SEF Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">API Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/SEF-API/">1.13</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/SEF-API/SEF_API/sef-api01">1.13</a></li><li><a class="dropdown__link" href="/SEF-API/1.10/SEF_API/sef-api01">1.10</a></li></ul></div><a href="https://github.com/SoftwareEnabledFlash/SEF-API/blob/main/SoftwareEnabledFlash-API.pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Download PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/SoftwareEnabledFlash/SEF-API" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/definitions">Definitions and Acronyms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/environment">Design Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/strategy">Design Strategy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/sef-unit">SEF Unit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/virtual-devices">Virtual Devices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/qos-domains">QoS Domains</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/super-pages">Super Pages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/super-blocks">Super Blocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/SEF-API/addressing">Addressing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/SEF-API/SEF_API/sef-api00">SEF_API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEF-API/SEF_API/sef-api00">API Management Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/SEF-API/SEF_API/sef-api01">Data Access Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEF-API/SEF_API/sef-api02">Common Structures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEF-API/SEF_API/sef-api03">Callback Structures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEF-API/SEF_API/sef-api04">Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/SEF-API/SEF_API/sef-api05">Enumerated Types</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/SEF-API/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">SEF_API</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Data Access Commands</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.13</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Data Access Commands</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-SEFWriteWithoutPhysicalAddress">SEFWriteWithoutPhysicalAddress<a class="hash-link" href="#function-SEFWriteWithoutPhysicalAddress" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct SEFStatus SEFWriteWithoutPhysicalAddress(SEFQoSHandle qosHandle, struct SEFFlashAddress flashAddress, struct SEFPlacementID placementID, struct SEFUserAddress userAddress, uint32_t numADU, const struct iovec *iov, uint16_t iovcnt, const void *metadata, struct SEFFlashAddress *permanentAddresses, uint32_t *distanceToEndOfSuperBlock, const struct SEFWriteOverrides *overrides)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Writes data to the specified user address to an underlying physical flash page that is assigned for the QoS Domain.
If auto-allocate is enabled for the super block, when the assigned super block is filled and closed, the SEF Unit assigns a new super block for the remaining writes. If auto-allocate is not enabled, host software will know about the super block size as part of the allocation, and can use this information to construct appropriately-sized write commands. This call will not return until the data has been persisted, and will automatically pad the user data with dummy data if required to complete flash memory programming.
The userAddress supplied here will be checked when reading the data back with SEFReadWithPhysicalAddress(). If storing a user address is not required, a userAddress of SEFUserAddressIgnore may be used. The check can optionally be disabled when reading and must be disabled to read data written with a user address of SEFUserAddressIgnore. In kSuperBlock mode and writing multiple ADUs, the LBA portion of the user address is incremented for each ADU. The write will fail if the userAddress is incremented to a value equal to SEFUserAddressIgnore. The userAddresses in a super block can be read using SEFGetUserAddressList.
Note: The synchronous and asynchronous versions differ in how data is committed to flash. As described above, the synchronous version flushes data to flash returning permanent flash addresses.
In contrast, the asynchronous version lazily flushes data to flash. The flash addresses returned are tentative instead. Once the SEF Unit eventually flushes a tentative address to flash, the original address may be discovered to be bad. When this happens, a kAddressUpdate QoS Domain notification is sent indicating the data has moved to a new permanent flash address. When the IOCB flag kSefIoFlagNotifyBufferRelease is set, the domain notification kBufferRelease will be sent for each piece of the IOCB iov as it becomes committed to flash. It is then the responsibility of the caller to maintain the lifetime of the iov buffers until the release notifications are sent. When not set, the commit state can be inferred instead by the kSuperBlockStateChanged QoS notification for the owning super block. Buffer lifetime is managed by library in this case by copying write data into library managed buffers.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-of-sefwritewithoutphysicaladdress">Parameters of SEFWriteWithoutPhysicalAddress<a class="hash-link" href="#parameters-of-sefwritewithoutphysicaladdress" title="Direct link to heading">​</a></h4><table><thead><tr><th>Type</th><th>Name</th><th>Direction</th><th>Description</th></tr></thead><tbody><tr><td>SEFQoSHandle</td><td>qosHandle</td><td>In</td><td>Handle to the QoS Domain</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFFlashAddress">struct SEFFlashAddress</a></td><td>flashAddress</td><td>In</td><td>Flash address of the super block. SEFAutoAllocate if auto allocate.</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFPlacementID">struct SEFPlacementID</a></td><td>placementID</td><td>In</td><td>Only valid if the flashAddress is auto allocated. A value from 0 to numPlacementIds–1 indicating what logical data group to place this data in.</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFUserAddress">struct SEFUserAddress</a></td><td>userAddress</td><td>In</td><td>FTL can store meta-data related to this operation by this field. For example, storing LBA address to bind to this write operation such as data tags.</td></tr><tr><td>uint32<!-- -->_<!-- -->t</td><td>numADU</td><td>In</td><td>Total amount of write data size calculated in QoS Domain ADUs.</td></tr><tr><td>const struct iovec*</td><td>iov</td><td>In</td><td>A pointer to the scatter gather list</td></tr><tr><td>uint16<!-- -->_<!-- -->t</td><td>iovcnt</td><td>In</td><td>The number of elements in the scatter gather list</td></tr><tr><td>const void *</td><td>metadata</td><td>In</td><td>Pointer to metadata to write with the data; The number of bytes per ADU required is SEFQoSDomainInfo::ADUsize.meta. May be NULL.</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFFlashAddress">struct SEFFlashAddress*</a></td><td>permanentAddresses</td><td>Out</td><td>Must allocate space for returned permanent physical addresses equal to 8<em>length (i.e. 8</em>number of ADUs)</td></tr><tr><td>uint32<!-- -->_<!-- -->t *</td><td>distanceToEndOfSuperBlock</td><td>Out</td><td>Indicates remaining size in ADU after this write operation. May be NULL. This is not a guarantee as the block may be forced closed if too many super blocks are open. When this returns 0, the block was closed.</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFWriteOverrides">const struct SEFWriteOverrides*</a></td><td>overrides</td><td>In</td><td>Overrides to scheduler parameters; pointer can be null for none required.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="return-value-of-sefwritewithoutphysicaladdress">Return value of SEFWriteWithoutPhysicalAddress<a class="hash-link" href="#return-value-of-sefwritewithoutphysicaladdress" title="Direct link to heading">​</a></h4><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>struct SEFStatus</td><td>Status and info summarizing result. When .error is non-zero, .info is the number of ADUs written.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="return-values-of-sefwritewithoutphysicaladdress">Return values of SEFWriteWithoutPhysicalAddress<a class="hash-link" href="#return-values-of-sefwritewithoutphysicaladdress" title="Direct link to heading">​</a></h4><table><thead><tr><th>Error Value</th><th>Description</th></tr></thead><tbody><tr><td>-ENODEV</td><td>The QoS Domain handle is not valid</td></tr><tr><td>-EPERM</td><td>The QoS Domain Handle is not open</td></tr><tr><td>-EINVAL</td><td>The function parameter is not valid; info returns the parameter index that is not valid</td></tr><tr><td>-ENOSPC</td><td>The QoS Domain is out of space</td></tr></tbody></table><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-SEFReadWithPhysicalAddress">SEFReadWithPhysicalAddress<a class="hash-link" href="#function-SEFReadWithPhysicalAddress" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct SEFStatus SEFReadWithPhysicalAddress(SEFQoSHandle qosHandle, struct SEFFlashAddress flashAddress, uint32_t numADU, const struct iovec *iov, uint16_t iovcnt, uint32_t iovOffset, struct SEFUserAddress userAddress, void *metadata, const struct SEFReadOverrides *overrides)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Reads data from a specified physical address.
While writes are expressed in terms of a placement ID or super block flash addresses, reads are expressed in terms of physical flash addresses. Read commands may interrupt other types of commands. When there is an in-flight flash memory command to the same flash die other than a read command, the in-flight command may be suspended in order to maintain deterministic read latency. If the target physical address is currently in the process of being programmed, data will instead be returned from the write buffer.
The userAddress must either match what was stored when the data was written or be SEFUserAddressIgnore to disable checking. In kSuperBlock mode, the LBA portion of the user address is incremented for each ADU in a multi-ADU write.
Note: When reading data that was just written, a read error will be returned when the data&#x27;s original flash address has been updated but the notification has yet to be processed by the client. In this case, the caller must retry the read after the flash address change notification has been processed.</p><p><strong>See Also:</strong> <a href="/SEF-API/SEF_API/sef-api00#function-SEFSetRootPointer">SEFSetRootPointer()</a> </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-of-sefreadwithphysicaladdress">Parameters of SEFReadWithPhysicalAddress<a class="hash-link" href="#parameters-of-sefreadwithphysicaladdress" title="Direct link to heading">​</a></h4><table><thead><tr><th>Type</th><th>Name</th><th>Direction</th><th>Description</th></tr></thead><tbody><tr><td>SEFQoSHandle</td><td>qosHandle</td><td>In</td><td>Handle to the QoS Domain</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFFlashAddress">struct SEFFlashAddress</a></td><td>flashAddress</td><td>In</td><td>Physical address for the read command; When the QoS Domain ID and block number are 0, the ADU offset is the root pointer index for the flash address to read.</td></tr><tr><td>uint32<!-- -->_<!-- -->t</td><td>numADU</td><td>In</td><td>Length of data to read (in ADUs). Maximum allowed is superBlockCapacity.</td></tr><tr><td>const struct iovec*</td><td>iov</td><td>In</td><td>A pointer to the scatter gather list</td></tr><tr><td>uint16<!-- -->_<!-- -->t</td><td>iovcnt</td><td>In</td><td>The number of elements in the scatter gather list</td></tr><tr><td>uint32<!-- -->_<!-- -->t</td><td>iovOffset</td><td>In</td><td>Starting byte offset into iov array</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFUserAddress">struct SEFUserAddress</a></td><td>userAddress</td><td>In</td><td>Stored data by the FTL. It will be validated with what was stored when the data was written except when SEFUserAddressIgnore is supplied</td></tr><tr><td>void *</td><td>metadata</td><td>In</td><td>Buffer to receive metadata stored with the data; The number of bytes per ADU required is SEFQoSDomainInfo::ADUsize.meta. May be NULL</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFReadOverrides">const struct SEFReadOverrides*</a></td><td>overrides</td><td>In</td><td>Overrides to scheduler parameters; pointer can be null for none required.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="return-value-of-sefreadwithphysicaladdress">Return value of SEFReadWithPhysicalAddress<a class="hash-link" href="#return-value-of-sefreadwithphysicaladdress" title="Direct link to heading">​</a></h4><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>struct SEFStatus</td><td>Status and info summarizing result.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="return-values-of-sefreadwithphysicaladdress">Return values of SEFReadWithPhysicalAddress<a class="hash-link" href="#return-values-of-sefreadwithphysicaladdress" title="Direct link to heading">​</a></h4><table><thead><tr><th>Error Value</th><th>Description</th></tr></thead><tbody><tr><td>-ENODEV</td><td>The QoS Domain handle is not valid</td></tr><tr><td>-EPERM</td><td>The QoS Domain Handle is not open</td></tr><tr><td>-EINVAL</td><td>The function parameter is not valid; info returns the parameter index that is not valid</td></tr></tbody></table><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-SEFNamelessCopy">SEFNamelessCopy<a class="hash-link" href="#function-SEFNamelessCopy" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct SEFStatus SEFNamelessCopy(SEFQoSHandle srcQosHandle, struct SEFCopySource copySource, SEFQoSHandle dstQosHandle, struct SEFFlashAddress copyDestination, const struct SEFUserAddressFilter *filter, const struct SEFCopyOverrides *overrides, uint32_t numAddressChangeRecords, struct SEFAddressChangeRequest *addressChangeInfo)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Performs Nameless Copy with map or list; optional user address filtering.
Copies ADUs as described by copySource to the copyDestination. Source addresses can only reference closed superblocks.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-of-sefnamelesscopy">Parameters of SEFNamelessCopy<a class="hash-link" href="#parameters-of-sefnamelesscopy" title="Direct link to heading">​</a></h4><table><thead><tr><th>Type</th><th>Name</th><th>Direction</th><th>Description</th></tr></thead><tbody><tr><td>SEFQoSHandle</td><td>srcQosHandle</td><td>In</td><td>Handle to the source QoS Domain</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFCopySource">struct SEFCopySource</a></td><td>copySource</td><td>In</td><td>Physical addresses to copy</td></tr><tr><td>SEFQoSHandle</td><td>dstQosHandle</td><td>In</td><td>Handle to the destination QoS Domain</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFFlashAddress">struct SEFFlashAddress</a></td><td>copyDestination</td><td>In</td><td>Flash address of destination super block</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFUserAddressFilter">const struct SEFUserAddressFilter*</a></td><td>filter</td><td>In</td><td>Pointer to user address filter parameters, null indicates no filtering</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFCopyOverrides">const struct SEFCopyOverrides*</a></td><td>overrides</td><td>In</td><td>Pointer to overrides to scheduler parameters; pointer can be null for none required.</td></tr><tr><td>uint32<!-- -->_<!-- -->t</td><td>numAddressChangeRecords</td><td>In</td><td>Maximum number of ADUs to copy (size of SEFAddressChangeRequest userAddress array)</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api02#struct-SEFAddressChangeRequest">struct SEFAddressChangeRequest*</a></td><td>addressChangeInfo</td><td>In</td><td>Filled with changed addresses</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="return-value-of-sefnamelesscopy">Return value of SEFNamelessCopy<a class="hash-link" href="#return-value-of-sefnamelesscopy" title="Direct link to heading">​</a></h4><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>struct SEFStatus</td><td>Status and info summarizing result</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="return-values-of-sefnamelesscopy">Return values of SEFNamelessCopy<a class="hash-link" href="#return-values-of-sefnamelesscopy" title="Direct link to heading">​</a></h4><table><thead><tr><th>Error Value</th><th>Description</th></tr></thead><tbody><tr><td>0</td><td>the info member contains: Destination super block has defective planes (kCopyDesinationDefectivePlanes), Read error was detected on source (kCopyReadErrorOnSource), Data that is out of User Address range is detected (kCopyFilteredUserAddresses), Destination super block was filled/closed (kCopyClosedDestination), Consumed entire source bitmap or list (kCopyConsumedSource)</td></tr><tr><td>-ENODEV</td><td>The QoS Domain handle is not valid</td></tr><tr><td>-EPERM</td><td>The QoS Domain Handle is not open</td></tr><tr><td>-EINVAL</td><td>The function parameter is not valid; info returns the parameter index that is not valid</td></tr></tbody></table><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-SEFWriteWithoutPhysicalAddressAsync">SEFWriteWithoutPhysicalAddressAsync<a class="hash-link" href="#function-SEFWriteWithoutPhysicalAddressAsync" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void SEFWriteWithoutPhysicalAddressAsync(SEFQoSHandle qosHandle, struct SEFWriteWithoutPhysicalAddressIOCB *iocb)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This function is the asynchronous version of SEFWriteWithoutPhysicalAddress().
Note: When the kSefIoFlagCommit flag is set in the IOCB&#x27;s flag field, the returned tentative addresses will be permanent, potentially adding padding.
Note: Any kAddressUpdate and kSuperBlockStateChange QoS notifications for the returned tentative addresses will occur after the iocb completion routine has returned. When no completion routine is set, the caller must handle the race condition of acting on done being set and the notifications being sent.</p><p><strong>See Also:</strong> <a href="/SEF-API/SEF_API/sef-api01#function-SEFWriteWithoutPhysicalAddress">SEFWriteWithoutPhysicalAddress()</a> </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-of-sefwritewithoutphysicaladdressasync">Parameters of SEFWriteWithoutPhysicalAddressAsync<a class="hash-link" href="#parameters-of-sefwritewithoutphysicaladdressasync" title="Direct link to heading">​</a></h4><table><thead><tr><th>Type</th><th>Name</th><th>Direction</th><th>Description</th></tr></thead><tbody><tr><td>SEFQoSHandle</td><td>qosHandle</td><td>In</td><td>Handle to the QoS Domain</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api03#struct-SEFWriteWithoutPhysicalAddressIOCB">struct SEFWriteWithoutPhysicalAddressIOCB*</a></td><td>iocb</td><td>In/Out</td><td>For asynchronous response from SEF Library. Unused fields should be set to 0.</td></tr></tbody></table><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-SEFReadWithPhysicalAddressAsync">SEFReadWithPhysicalAddressAsync<a class="hash-link" href="#function-SEFReadWithPhysicalAddressAsync" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void SEFReadWithPhysicalAddressAsync(SEFQoSHandle qosHandle, struct SEFReadWithPhysicalAddressIOCB *iocb)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This function is the asynchronous version of SEFReadWithPhysicalAddress(). </p><p><strong>See Also:</strong> <a href="/SEF-API/SEF_API/sef-api01#function-SEFReadWithPhysicalAddress">SEFReadWithPhysicalAddress()</a> </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-of-sefreadwithphysicaladdressasync">Parameters of SEFReadWithPhysicalAddressAsync<a class="hash-link" href="#parameters-of-sefreadwithphysicaladdressasync" title="Direct link to heading">​</a></h4><table><thead><tr><th>Type</th><th>Name</th><th>Direction</th><th>Description</th></tr></thead><tbody><tr><td>SEFQoSHandle</td><td>qosHandle</td><td>In</td><td>Handle to the QoS Domain</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api03#struct-SEFReadWithPhysicalAddressIOCB">struct SEFReadWithPhysicalAddressIOCB*</a></td><td>iocb</td><td>In/Out</td><td>For asynchronous response from SEF Library Unused fields should be set to 0.</td></tr></tbody></table><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-SEFNamelessCopyAsync">SEFNamelessCopyAsync<a class="hash-link" href="#function-SEFNamelessCopyAsync" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void SEFNamelessCopyAsync(SEFQoSHandle qosHandle, struct SEFNamelessCopyIOCB *iocb)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This function is the asynchronous version of SEFNamelessCopy(). </p><p><strong>See Also:</strong> <a href="/SEF-API/SEF_API/sef-api01#function-SEFNamelessCopy">SEFNamelessCopy()</a> </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-of-sefnamelesscopyasync">Parameters of SEFNamelessCopyAsync<a class="hash-link" href="#parameters-of-sefnamelesscopyasync" title="Direct link to heading">​</a></h4><table><thead><tr><th>Type</th><th>Name</th><th>Direction</th><th>Description</th></tr></thead><tbody><tr><td>SEFQoSHandle</td><td>qosHandle</td><td>In</td><td>Handle to the source QoS Domain</td></tr><tr><td><a href="/SEF-API/SEF_API/sef-api03#struct-SEFNamelessCopyIOCB">struct SEFNamelessCopyIOCB*</a></td><td>iocb</td><td>In/Out</td><td>For asynchronous response from SEF Library Unused fields should be set to 0.</td></tr></tbody></table><hr></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/SEF-API/SEF_API/sef-api00"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">API Management Commands</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/SEF-API/SEF_API/sef-api02"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Common Structures</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#function-SEFWriteWithoutPhysicalAddress" class="table-of-contents__link toc-highlight">SEFWriteWithoutPhysicalAddress</a></li><li><a href="#function-SEFReadWithPhysicalAddress" class="table-of-contents__link toc-highlight">SEFReadWithPhysicalAddress</a></li><li><a href="#function-SEFNamelessCopy" class="table-of-contents__link toc-highlight">SEFNamelessCopy</a></li><li><a href="#function-SEFWriteWithoutPhysicalAddressAsync" class="table-of-contents__link toc-highlight">SEFWriteWithoutPhysicalAddressAsync</a></li><li><a href="#function-SEFReadWithPhysicalAddressAsync" class="table-of-contents__link toc-highlight">SEFReadWithPhysicalAddressAsync</a></li><li><a href="#function-SEFNamelessCopyAsync" class="table-of-contents__link toc-highlight">SEFNamelessCopyAsync</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Software-Enabled Flash Project. Built with Docusaurus.</div></div></div></footer></div>
<script src="/SEF-API/assets/js/runtime~main.02760fe7.js"></script>
<script src="/SEF-API/assets/js/main.eb5edea8.js"></script>
</body>
</html>